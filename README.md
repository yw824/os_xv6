# os_xv6

### 설계과제 3
SSU Scheduler 구현 
- SSU Scheduler는 프로세스 실행 흐름에서 새로 생긴 프로세스가 제외되지 않도록 큰 가중치를 부여하는 스케줄러임 
- 모든 프로세스는 각자의 가중치(weight) 및 우선순위(priority) 값을 가짐 
- priority 값은 스케줄링 함수가 호출될 때마다, 다음과 같은 규칙에 따라 업데이트됨 - new_priority = old_priority + (time_slice / weight) 
- 해당 과제에서는 time_slice 값을 10,000,000 ns로 사용 
- SSU Scheduler를 위한 스케쥴링 함수는 다음 실행될 프로세스로 RUNNABLE 상태인 프로세스 중 가장 낮은 priority 값을 가진 프로세스를 선택함 
- weight 값은 프로세스 생성 순서에 따라 1부터 차례대로 증가시키며 부여함 
- 프로세스 생성 또는 wake up 시 priority 값을 0부터 부여하게 되면, 해당 프로세스가 독점 실행될 수 있으므로 관리 하고 있는 프로세스의 priority 값 중 가장 작은 값을 부여함 
    - xv6에서 프로세스 wake up은 프로세스 상태가“SLEEPING”에서 “RUNNABLE”로 전이되는 것을 의미함 
    - 가장 작은 priority 값은 struct ptable의 멤버로 관리하며, 스케줄링 함수가 호출될 때마다 new_priority과 함께 갱신됨

2. 구현한 스케쥴링 함수의 동작 과정을 확인하는 sdebug 명령어 및 이를 위한 weightset() 시스템 콜 구현 
- 쉘에 “sdebug” 입력 시 스케줄링 함수의 동작 과정을 확인할 수 있도록 프로세스 ID, 프로세스의 가중치, 프로세스 생성 후부터 해당 명령어에 의해 프로세스 정보가 출력되기까지 소요된 시간을 출력하는 기능 구현 
- 해당 명령어 구현을 위해 필요한 매크로 선언은 다음과 같음 - “PNUM”
" 구현한 스케줄링 함수를 확인하기 위해 fork()로 생성할 프로세스의 개수
" 기본값 : 5
- “PRINT_CYCLE”
" fork()로 생성된 프로세스 중 실행 중인 프로세스 정보를 출력하는 주기
" 프로세스 별로 한 번만 출력됨
" 기본값 : 100000000
- “TOTAL_COUNTER”
" fork()로 생성된 프로세스가 생성된 이후부터 소모할 수 있는 시간
" “TOTAL_COUNTER” 값을 전부 소모하면 프로세스는 종료됨
" 기본값 : 500000000
- “PNUM”값을 변경해도 정상적으로 동작하여야 함 ! 해당 명령어는 생성한 프로세스가 모두 종료된 후 종료되도록 구현 - 다른 xv6 명령어 구현 방식 참고 ! weightset() 시스템 콜은 매개변수로 입력받은 값을 sdebug 명령어에 의해 생성되는 프로세스의 weight 값으로 부여하도록 구현

- " 매개변수로 weight 값을 0으로 입력받을 시 에러처리 - sdebug 명령어에 의해 생성되는 프로세스의 weight 값은 시스템에서 생성한 프로세스와 별도로 생성된 순서에 따라 1부터 증가시키며 부여함